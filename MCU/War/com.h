/*******************************************************************************
 *
 * Project: BKWAR
 * 
 ******************************************************************************/

/*******************************************************************************
 *
 *	Module			: com.h
 *  Tool		  	: KeilC ARM 4.22a
 *	Chip		  	: STM32F103C8
 * 	History			: Begin at 05-Dec-13
 *	Description	    : Applcation layer 
 *				
 *	Author			: Dang Anh Tung			
 *				
 ******************************************************************************/

#ifndef __COM_H
#define __COM_H
 
 
 /*******************************************************************************
 * 							        IMPORT
 ******************************************************************************/
#include "mcu_board.h"
#include "mem.h"


/********************************************************************************
* 							        TYPEDEF
********************************************************************************/

/********************************************************************************
* 							        DEFINE
********************************************************************************/
#define COM_FRAME_STX   (uint8_t)0x02
#define COM_FRAME_ETX   (uint8_t)0x03
#define COM_BKW_ID      (uint8_t)0x88
#define COM_LEN_MIN     (uint8_t)5
#define COM_TIME_OUT    (uint32_t)1000 //ms

/********************************************************************************
* 					        GLOBAL VARIABLES
********************************************************************************/
extern BOOL COM_FrameIsReady;
extern COMStruct COM_Frame;

/********************************************************************************
* 					        PRIVATE VARIABLES
********************************************************************************/

/********************************************************************************
* 					        PUBLIC FUNCTIONS
********************************************************************************/
void COM_Init(void);
void COM_SetReadInt(BOOL b);
void COM_BufferReset(void);
BOOL COM_BufferIsEmpty(void);
BOOL COM_ReadFrame(void);
void COM_Response(COM_RES r);

#endif /* __COM_H */
